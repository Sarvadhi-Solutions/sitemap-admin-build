(this["webpackJsonpZopto-Web"]=this["webpackJsonpZopto-Web"]||[]).push([[11],{1396:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var r,c,o,a,i,s=n(6),l=n(16),b=n(107),u=n(1326),d=n(1313),f=n(121),j=n(119),h=n(64),x=n(32),p=n(1),O=(n(452),n(628)),v=n(229),g=n(322),m=n(1319),w=n(1360),k=n(480),y=(n(425),n(1311)),C=n(185),S=(n(594),n(23)),D=n(52),_=n(0),E=Object(w.a)(O.a)(r||(r=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  padding: 20px;\n  background-color: #f5f5f5;\n  border-radius: 12px;\n"]))),R=Object(w.a)(v.a)(c||(c=Object(b.a)(["\n  margin-bottom: 12px;\n  font-weight: bold;\n"]))),U=Object(w.a)(v.a)(o||(o=Object(b.a)(["\n  margin-bottom: 12px;\n  color: #666;\n"]))),q=Object(w.a)(v.a)(a||(a=Object(b.a)(["\n  margin-bottom: 120px;\n  color: #666;\n"]))),A=Object(w.a)(g.a)(i||(i=Object(b.a)(["\n  margin-top: auto;\n  box-shadow: none;\n  background-color: blue; /* You can change this color */\n  color: #fff; /* Text color for the button */\n  &:hover {\n    background-color: lightblue; /* Change color on hover */\n  }\n"]))),I=function(e){var t=e.id,n=e.token,r=e.title,c=e.content,o=e.buttonText,a=e.name,i=Object(S.m)(),b=Object(x.b)(),u=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(Object(C.d)(t,n));case 3:return e.next=5,b(Object(C.c)(t,n));case 5:i(D.b.general.collection),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("API error:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(E,{elevation:3,children:[Object(_.jsx)(R,{variant:"h6",children:r}),Object(_.jsx)(U,{variant:"body1",children:c}),Object(_.jsxs)(m.a,{direction:{xs:"column",sm:"row"},sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},spacing:2,children:[Object(_.jsx)(A,{variant:"contained",color:"primary",onClick:u,children:o}),Object(_.jsxs)(q,{variant:"body1",sx:{display:"flex",flexDirection:"row",alignContent:"center",alignItems:"center"},children:[Object(_.jsx)(y.a,{sx:{width:30,height:30,marginRight:"5px"}}),a]})]})]})})};function T(){var e,t=Object(x.b)(),n=Object(x.c)((function(e){var t,n,r,c;return null===e||void 0===e||null===(t=e.wfUser)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.data)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.user}));console.log("wahwdgqukwyfdqd",n),Object(p.useEffect)(Object(l.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(k.d)());case 2:case"end":return e.stop()}}),e)}))),[]);var r=Object(x.c)((function(e){var t,n;return null===e||void 0===e||null===(t=e.wfUser)||void 0===t||null===(n=t.userDetails)||void 0===n?void 0:n.data}));Object(p.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var n,r,c,o;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=new URLSearchParams(window.location.search)).has("code")){e.next=19;break}return r=n.get("code"),e.next=6,t(Object(k.c)(r));case 6:if(c=e.sent,console.log("Received code:",c),1!=c.success){e.next=17;break}return o=localStorage.getItem("token"),console.log("awhdgy",o),e.next=13,t(Object(k.b)(o));case 13:if(1!=e.sent.success){e.next=17;break}return e.next=17,t(Object(k.d)());case 17:e.next=20;break;case 19:console.error("Code parameter not found in the URL");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var c=Object(f.a)().themeStretch,o=Object(h.b)().enqueueSnackbar,a=Object(x.c)((function(e){return e.category.error}));return Object(p.useEffect)((function(){a&&o(a.message,{variant:"error"})}),[a]),Object(_.jsx)(j.a,{title:"General: App",children:Object(_.jsxs)(u.a,{maxWidth:!c&&"xl",children:[Object(_.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"16px"},children:Object(_.jsx)(g.a,{onClick:function(){var e="https://webflow.com/oauth/authorize?response_type=code&client_id=".concat("30f0f026562b74bbb017b3a9093a7b1c2a2ffb0da4518803ab7ed2fdbd34f58f");window.location.href=e},color:"inherit",variant:"outlined",size:"large",sx:{m:.5,flexShrink:0,color:"white",bgcolor:"blue","&:hover":{borderColor:"lightblue",bgcolor:"lightblue"}},children:"+ Add Site"},"addsite")}),Object(_.jsx)(d.a,{container:!0,spacing:3,children:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.map((function(e,t){var n;return null===(n=e.userSites)||void 0===n?void 0:n.map((function(n,r){var c=e.userDetails.firstname;return Object(_.jsx)(d.a,{item:!0,xs:12,md:4,style:{height:"250px"},children:Object(_.jsx)(I,{token:e.userDetails.wf_access_token,id:n.wf_id,title:n.name,content:n.shortName,buttonText:"View",name:c})},"".concat(t,"-").concat(r))}))}))})]})})}}}]);
//# sourceMappingURL=11.df9b879d.chunk.js.map