{"version":3,"sources":["pages/dashboard/GeneralApp.js"],"names":["StyledPaper","styled","Paper","_templateObject","_taggedTemplateLiteral","Title","Typography","_templateObject2","Content","_templateObject3","NameContent","_templateObject4","StyledButton","Button","_templateObject5","CardComponent","_ref","id","token","title","content","buttonText","name","navigate","useNavigate","dispatch","useDispatch","handleClick","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","getDomainList","getCollectionList","PATH_DASHBOARD","general","collection","t0","console","error","stop","apply","arguments","_jsx","_Fragment","children","_jsxs","elevation","variant","Stack","direction","xs","sm","sx","display","flexDirection","justifyContent","spacing","color","onClick","alignContent","alignItems","MUIAvatar","width","height","marginRight","GeneralApp","_userDetails$data","user","useSelector","state","_state$wfUser","_state$wfUser$user","_state$wfUser$user$da","_state$wfUser$user$da2","wfUser","data","log","useEffect","_callee2","_context2","getwfUserDetails","userDetails","_state$wfUser2","_state$wfUser2$userDe","fetchData","_ref4","_callee3","queryParams","code","res1","_context3","URLSearchParams","window","location","search","has","get","getwfUser","sent","success","localStorage","getItem","getSites","themeStretch","useSettings","enqueueSnackbar","useSnackbar","category","message","Page","Container","maxWidth","style","marginBottom","authorizationUrl","concat","process","href","size","m","flexShrink","bgcolor","borderColor","Grid","container","map","index","_data$userSites","userSites","userSite","siteIndex","firstname","item","md","wf_access_token","wf_id","shortName"],"mappings":"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","file":"static/js/11.df9b879d.chunk.js","sourcesContent":["// @mui\nimport { useTheme } from \"@mui/material/styles\";\nimport { Container, Grid } from \"@mui/material\";\n// hooks\n// import useAuth from \"../../hooks/useAuth\";\nimport useSettings from \"../../hooks/useSettings\";\n// components\nimport Page from \"../../components/Page\";\n// sections\nimport { useSnackbar } from \"notistack\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { GetCount } from \"src/redux/slices/count\";\n\nimport { Button, Paper, Typography, Stack } from \"@mui/material\";\nimport styled from \"styled-components\";\nimport { getSites, getwfUser, getwfUserDetails } from \"src/redux/slices/wfUser\";\nimport { AppWidgetSummary } from \"src/sections/@dashboard/general/app\";\nimport { Avatar as MUIAvatar } from \"@mui/material\";\nimport {\n  getCollectionList,\n  getDomainList,\n  getitemList,\n} from \"src/redux/slices/collection\";\nimport Collection from \"src/components/Collection\";\nimport { useNavigate } from \"react-router\";\nimport { PATH_DASHBOARD } from \"src/routes/paths\";\n// ----------------------------------------------------------------------\n\nconst StyledPaper = styled(Paper)`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  padding: 20px;\n  background-color: #f5f5f5;\n  border-radius: 12px;\n`;\n\nconst Title = styled(Typography)`\n  margin-bottom: 12px;\n  font-weight: bold;\n`;\n\nconst Content = styled(Typography)`\n  margin-bottom: 12px;\n  color: #666;\n`;\nconst NameContent = styled(Typography)`\n  margin-bottom: 120px;\n  color: #666;\n`;\n\nconst StyledButton = styled(Button)`\n  margin-top: auto;\n  box-shadow: none;\n  background-color: blue; /* You can change this color */\n  color: #fff; /* Text color for the button */\n  &:hover {\n    background-color: lightblue; /* Change color on hover */\n  }\n`;\n\nconst CardComponent = ({ id, token, title, content, buttonText, name }) => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const handleClick = async () => {\n    try {\n      await dispatch(getDomainList(id, token));\n      await dispatch(getCollectionList(id, token));\n\n      navigate(PATH_DASHBOARD.general.collection);\n    } catch (error) {\n      console.error(\"API error:\", error);\n    }\n  };\n  // dispatch(getitemList(token, collectionIds));\n\n  return (\n    <>\n      <StyledPaper elevation={3}>\n        <Title variant=\"h6\">{title}</Title>\n        <Content variant=\"body1\">{content}</Content>\n        <Stack\n          direction={{ xs: \"column\", sm: \"row\" }}\n          sx={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n          }}\n          spacing={2}\n        >\n          <StyledButton\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleClick}\n          >\n            {buttonText}\n          </StyledButton>\n          <NameContent\n            variant=\"body1\"\n            sx={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignContent: \"center\",\n              alignItems: \"center\",\n            }}\n          >\n            <MUIAvatar\n              sx={{ width: 30, height: 30, marginRight: \"5px\" }}\n            ></MUIAvatar>\n            {name}\n          </NameContent>\n        </Stack>\n      </StyledPaper>\n    </>\n  );\n};\nexport default function GeneralApp() {\n  const dispatch = useDispatch();\n  const user = useSelector((state) => state?.wfUser?.user?.data?.data?.user);\n  console.log(\"wahwdgqukwyfdqd\", user);\n  useEffect(async () => {\n    await dispatch(getwfUserDetails());\n  }, []);\n  const userDetails = useSelector((state) => state?.wfUser?.userDetails?.data);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // First, get the user details\n        const queryParams = new URLSearchParams(window.location.search);\n        if (queryParams.has(\"code\")) {\n          const code = queryParams.get(\"code\");\n          const res1 = await dispatch(getwfUser(code));\n          console.log(\"Received code:\", res1);\n          if (res1.success == true) {\n            const token = localStorage.getItem(\"token\");\n            console.log(\"awhdgy\", token);\n            const res2 = await dispatch(getSites(token));\n            if (res2.success == true) {\n              await dispatch(getwfUserDetails());\n            }\n          }\n        } else {\n          console.error(\"Code parameter not found in the URL\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n\n    fetchData();\n  }, [dispatch]);\n  // useEffect(async () => {\n  //   const queryParams = new URLSearchParams(window.location.search);\n  //   if (queryParams.has(\"code\")) {\n  //     const code = queryParams.get(\"code\");\n  //     if (code !== undefined) {\n  //       await dispatch(getwfUser(code));\n  //     }\n  //     console.log(\"Received code:\", code);\n  //   } else {\n  //     console.error(\"Code parameter not found in the URL\");\n  //   }\n  // }, [dispatch]);\n  // useEffect(async () => {\n  //   if (user?.wf_access_token != undefined) {\n  //     await dispatch(getSites(user?.wf_access_token));\n  //   }\n  // }, [user]);\n  // useEffect(async () => {\n  //   await dispatch(getwfUserDetails());\n  // }, []);\n\n  const { themeStretch } = useSettings();\n  const handleAddSite = () => {\n    const authorizationUrl = `https://webflow.com/oauth/authorize?response_type=code&client_id=${process.env.REACT_APP_CLIENT_ID}`;\n    window.location.href = authorizationUrl;\n  };\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const error = useSelector((state) => state.category.error);\n  useEffect(() => {\n    if (error) {\n      enqueueSnackbar(error.message, { variant: \"error\" });\n    }\n  }, [error]);\n  return (\n    <Page title=\"General: App\">\n      <Container maxWidth={themeStretch ? false : \"xl\"}>\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            marginBottom: \"16px\",\n          }}\n        >\n          <Button\n            key=\"addsite\"\n            onClick={handleAddSite}\n            color=\"inherit\"\n            variant=\"outlined\"\n            size=\"large\"\n            sx={{\n              m: 0.5,\n              flexShrink: 0,\n              color: \"white\",\n              bgcolor: \"blue\",\n              \"&:hover\": {\n                borderColor: \"lightblue\",\n                bgcolor: \"lightblue\",\n              },\n            }}\n          >\n            + Add Site\n          </Button>\n        </div>\n        <Grid container spacing={3}>\n          {userDetails?.data?.map((data, index) =>\n            data.userSites?.map((userSite, siteIndex) => {\n              // console.log(\"======\", data);\n              const userDetails = data.userDetails.firstname;\n              return (\n                <Grid\n                  item\n                  xs={12}\n                  md={4}\n                  key={`${index}-${siteIndex}`}\n                  style={{ height: \"250px\" }}\n                >\n                  <CardComponent\n                    token={data.userDetails.wf_access_token}\n                    id={userSite.wf_id}\n                    title={userSite.name}\n                    content={userSite.shortName}\n                    buttonText=\"View\"\n                    name={userDetails}\n                  />\n                </Grid>\n              );\n            })\n          )}\n        </Grid>\n      </Container>\n    </Page>\n  );\n}\n"],"sourceRoot":""}